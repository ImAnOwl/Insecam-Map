<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=ANSI" />
  <title>Insecam Map</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   
  
  <style>
   /* Always set the map height explicitly to define the size of the div
    * element that contains the map. */
   #map {
     height: 100%;
   }
   /* Optional: Makes the sample page fill the window. */
   html, body {
     height: 100%;
     margin: 0;
     padding: 0;
   }

    
 </style>
</head>
<body>

        <div id="map"></div>
        
<!-- code -->
 <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB1aJErZr-YTlhTvvxHGUUfNRTUMty__Y4"
   type="text/javascript"></script>
  <script type="text/javascript">
    var locations = [
     ["<a href='http://46.5.192.75:80/cgi-bin/faststream.jpg?stream=half&amp;fps=15&amp;rand=COUNTER'><img id='image0' src='http://46.5.192.75:80/cgi-bin/faststream.jpg?stream=half&amp;fps=15&amp;rand=COUNTER' alt='' height='420' width='420'/><b>Ettlingenweier</b></a>", 48.928480, 8.389350, "http://46.5.192.75:80/cgi-bin/faststream.jpg?stream=half&amp;fps=15&amp;rand=COUNTER"]]
   
   
var map = new google.maps.Map(document.getElementById("map"), {
zoom: 5,
center: new google.maps.LatLng(51.54376, 9.910419999999931),
mapTypeId: google.maps.MapTypeId.ROADMAP
});
     if (navigator.geolocation) {
       navigator.geolocation.getCurrentPosition(function(position) {
         var pos = {
           lat: position.coords.latitude,
           lng: position.coords.longitude
         };
                     map.setZoom(11);
         map.setCenter(pos);
       }, function() {
         handleLocationError(true, infoWindow, map.getCenter());
       });
     } else {
       handleLocationError(false, infoWindow, map.getCenter());
     }
var infowindow = new google.maps.InfoWindow();

var marker, i;


$(document).ready(function(){
    $.get('https://inseccam.oliverczempas.de/points/?json', function(data) {
      
      var data_raw = data;
      var data_json = JSON.parse(data_raw);
      for(x in data_raw){
          console.log(x);
      }

    });
});



for (i = 0; i < locations.length; i++) {
marker = new google.maps.Marker({
position: new google.maps.LatLng(locations[i][1], locations[i][2]),
map: map,
url: locations[i][3]
});

   google.maps.event.addListener(marker, "click", (function(marker, i) {
return function() {
  infowindow.setContent(locations[i][0]);
  infowindow.open(map, marker);
}
})(marker, i));

 }

  </script>
</body>
</html>

